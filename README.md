# Palistor

**Ğ ĞµĞ°ĞºÑ‚Ğ¸Ğ²Ğ½Ñ‹Ğ¹ state manager Ğ´Ğ»Ñ Ñ„Ğ¾Ñ€Ğ¼ Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ½Ñ‹Ğ¼ Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ğ½Ğ³Ğ¾Ğ¼**

Palistor â€” ÑÑ‚Ğ¾ Ğ»ĞµĞ³ĞºĞ¾Ğ²ĞµÑĞ½Ğ°Ñ Ğ±Ğ¸Ğ±Ğ»Ğ¸Ğ¾Ñ‚ĞµĞºĞ° Ğ´Ğ»Ñ ÑƒĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸ĞµĞ¼ Ñ„Ğ¾Ñ€Ğ¼ Ğ² React Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸ÑÑ…. ĞŸĞ¾ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ° Ğ½Ğ° Ğ¿Ñ€Ğ¸Ğ½Ñ†Ğ¸Ğ¿Ğ°Ñ… Ğ¼Ğ¸Ğ½Ğ¸Ğ¼Ğ°Ğ»ÑŒĞ½Ñ‹Ñ… Ñ€Ğµ-Ñ€ĞµĞ½Ğ´ĞµÑ€Ğ¾Ğ² Ğ¸ Ğ´ĞµĞºĞ»Ğ°Ñ€Ğ°Ñ‚Ğ¸Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ĞµĞ¹.

## ĞšĞ»ÑÑ‡ĞµĞ²Ñ‹Ğµ Ğ¾ÑĞ¾Ğ±ĞµĞ½Ğ½Ğ¾ÑÑ‚Ğ¸

- ğŸ¯ **Ğ¢Ğ¾Ñ‡ĞµÑ‡Ğ½Ñ‹Ğµ Ğ¾Ğ±Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¸Ñ** â€” ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚ Ğ¿ĞµÑ€ĞµÑ€ĞµĞ½Ğ´ĞµÑ€Ğ¸Ñ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞºĞ¾Ğ³Ğ´Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½Ğ¸Ñ‚ÑÑ ĞµĞ³Ğ¾ Ğ¿Ğ¾Ğ»Ğµ
- ğŸ“¦ **Computed Field State** â€” Ğ²Ñ‹Ñ‡Ğ¸ÑĞ»ÑĞµĞ¼Ñ‹Ğµ ÑĞ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° (isVisible, isDisabled) Ñ…Ñ€Ğ°Ğ½ÑÑ‚ÑÑ Ğ² store
- ğŸ”— **Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹** â€” Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ Ñ‡ĞµÑ€ĞµĞ· ÑĞ²Ğ½Ğ¾Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½Ğ¸Ğµ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ Ğ¼ĞµĞ¶Ğ´Ñƒ Ğ¿Ğ¾Ğ»ÑĞ¼Ğ¸
- ğŸŒ **i18n Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ°** â€” Ğ²ÑÑ‚Ñ€Ğ¾ĞµĞ½Ğ½Ğ°Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ next-intl
- ğŸ’¾ **Persistence** â€” Ğ°Ğ²Ñ‚Ğ¾ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ğµ Ñ‡ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸ĞºĞ¾Ğ² Ğ² localStorage
- ğŸ§ª **Ğ¢ĞµÑÑ‚Ğ¸Ñ€ÑƒĞµĞ¼Ğ¾ÑÑ‚ÑŒ** â€” Ñ‡Ğ¸ÑÑ‚Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸ Ğ´Ğ»Ñ Ğ²ÑĞµÑ… Ğ¾Ğ¿ĞµÑ€Ğ°Ñ†Ğ¸Ğ¹ Ñ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸ĞµĞ¼

## Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°
 - **Ğ’ Ñ€Ğ°Ğ·Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞµ**

---

## Ğ‘Ñ‹ÑÑ‚Ñ€Ñ‹Ğ¹ ÑÑ‚Ğ°Ñ€Ñ‚

### 1. ĞĞ¿Ñ€ĞµĞ´ĞµĞ»Ğ¸Ñ‚Ğµ ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ñ Ñ„Ğ¾Ñ€Ğ¼Ñ‹

```typescript
import type { FormConfig } from "@/modules/palistor";

interface PaymentForm {
  paymentType: "card" | "bank" | "crypto";
  cardNumber: string;
  bankAccount: string;
  amount: number;
}

const paymentConfig: FormConfig<PaymentForm> = {
  paymentType: {
    value: "card",
    label: (t) => t("form.paymentType"),
  },

  cardNumber: {
    value: "",
    label: (t) => t("form.cardNumber"),
    placeholder: (t) => t("form.cardNumberPlaceholder"),
    // Ğ’Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ paymentType
    isVisible: (values) => values.paymentType === "card",
    isRequired: (values) => values.paymentType === "card",
    // Ğ¯Ğ²Ğ½Ğ¾ ÑƒĞºĞ°Ğ·Ñ‹Ğ²Ğ°ĞµĞ¼ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸
    dependencies: ["paymentType"],
    // Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
    validate: (value, values) => {
      if (values.paymentType === "card" && value.length < 16) {
        return "validation.cardNumberInvalid";
      }
    },
  },

  bankAccount: {
    value: "",
    label: (t) => t("form.bankAccount"),
    isVisible: (values) => values.paymentType === "bank",
    isRequired: (values) => values.paymentType === "bank",
    dependencies: ["paymentType"],
  },

  amount: {
    value: 0,
    label: (t) => t("form.amount"),
    isRequired: true,
    // Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ â€” Ğ¿ĞµÑ€ĞµÑÑ‡Ñ‘Ñ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ ÑĞµĞ±Ñ
    dependencies: [],
  },
};
```

### 2. Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞ¹Ñ‚Ğµ Ğ² ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğµ

```tsx
import { useFormStore } from "@/modules/palistor";

function PaymentForm() {
  const form = useFormStore<PaymentForm>("payment-form", {
    config: paymentConfig,
    defaults: {
      paymentType: "card",
      cardNumber: "",
      bankAccount: "",
      amount: 0,
    },
    onSubmit: async (values) => {
      await api.processPayment(values);
    },
  });

  return (
    <form onSubmit={(e) => { e.preventDefault(); form.submit(); }}>
      <Select {...form.getFieldProps("paymentType")}>
        <Option value="card">Card</Option>
        <Option value="bank">Bank</Option>
      </Select>

      {/* ĞŸĞ¾Ğ»Ñ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ ÑĞºÑ€Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ/Ğ¿Ğ¾ĞºĞ°Ğ·Ñ‹Ğ²Ğ°ÑÑ‚ÑÑ */}
      {form.fields.cardNumber.isVisible && (
        <Input {...form.getFieldProps("cardNumber")} />
      )}

      {form.fields.bankAccount.isVisible && (
        <Input {...form.getFieldProps("bankAccount")} />
      )}

      <Input {...form.getFieldProps("amount")} type="number" />

      <Button type="submit" isLoading={form.submitting}>
        Pay
      </Button>
    </form>
  );
}
```

---

## ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

### Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° FormState

```typescript
interface FormState<TValues> {
  // ĞŸĞ»Ğ¾ÑĞºĞ¸Ğ¹ Ğ¾Ğ±ÑŠĞµĞºÑ‚ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğ¹ (Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ¹ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸)
  values: TValues;

  // Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»Ñ
  fields: {
    [K in keyof TValues]: {
      value: TValues[K];
      isVisible: boolean;
      isDisabled: boolean;
      isReadOnly: boolean;
      isRequired: boolean;
      label?: string;
      placeholder?: string;
      description?: string;
      error?: string;
    };
  };

  // ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸
  errors: Partial<Record<keyof TValues, string>>;

  // ĞœĞµÑ‚Ğ°Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ
  submitting: boolean;
  dirty: boolean;
  showErrors: boolean;
  locale: string;
}
```

### ĞŸĞ¾Ñ‚Ğ¾Ğº Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

```
setValue('paymentType', 'bank')
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ setFieldValueAction (Ñ‡Ğ¸ÑÑ‚Ğ°Ñ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ñ)    â”‚
â”‚  â”œâ”€â”€ formatter(value)                   â”‚
â”‚  â”œâ”€â”€ newValues = { ...values, [key] }   â”‚
â”‚  â””â”€â”€ recomputeFieldStates()             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ recomputeFieldStates                    â”‚
â”‚  for each field:                        â”‚
â”‚    â”œâ”€â”€ shouldRecalculateField()?        â”‚
â”‚    â”‚     â””â”€â”€ check dependencies         â”‚
â”‚    â””â”€â”€ computeFieldState() if needed    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â”‚
    â–¼
store.setState(newState)
    â”‚
    â–¼
React: useSyncExternalStore â†’ selective re-render
```

---

## Ğ¡Ğ¸ÑÑ‚ĞµĞ¼Ğ° Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹ (dependencies)

ĞœĞ°ÑÑĞ¸Ğ² `dependencies` Ğ² ĞºĞ¾Ğ½Ñ„Ğ¸Ğ³ÑƒÑ€Ğ°Ñ†Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»Ñ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ÑĞµÑ‚, Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ ĞºĞ°ĞºĞ¸Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ½ÑƒĞ¶Ğ½Ğ¾ Ğ¿ĞµÑ€ĞµÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ ĞµĞ³Ğ¾ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ.

| dependencies | ĞŸĞ¾Ğ²ĞµĞ´ĞµĞ½Ğ¸Ğµ |
|--------------|-----------|
| `undefined` (Ğ½Ğµ ÑƒĞºĞ°Ğ·Ğ°Ğ½) | ĞŸĞµÑ€ĞµÑÑ‡Ñ‘Ñ‚ Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ **Ğ»ÑĞ±Ğ¾Ğ³Ğ¾** Ğ¿Ğ¾Ğ»Ñ |
| `['field1', 'field2']` | ĞŸĞµÑ€ĞµÑÑ‡Ñ‘Ñ‚ Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ field1, field2 **Ğ¸Ğ»Ğ¸ ÑĞµĞ±Ñ** |
| `[]` (Ğ¿ÑƒÑÑ‚Ğ¾Ğ¹ Ğ¼Ğ°ÑÑĞ¸Ğ²) | ĞŸĞµÑ€ĞµÑÑ‡Ñ‘Ñ‚ **Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾** Ğ¿Ñ€Ğ¸ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ğ¸ ÑĞµĞ±Ñ Ğ¸Ğ»Ğ¸ init/reset |

### ĞŸÑ€Ğ¸Ğ¼ĞµÑ€ Ğ¾Ğ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ğ¸

```typescript
const config: FormConfig<MyForm> = {
  // ĞŸĞ¾Ğ»Ğµ-Ñ‚Ñ€Ğ¸Ğ³Ğ³ĞµÑ€ â€” Ğ±ĞµĞ· Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ĞµĞ¹
  country: { value: "US" },

  // Ğ—Ğ°Ğ²Ğ¸ÑĞ¸Ñ‚ Ğ¾Ñ‚ country
  city: {
    value: "",
    isVisible: (v) => v.country !== "",
    dependencies: ["country"],
  },

  // Ğ¡Ñ‚Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ â€” Ğ½Ğ¸ĞºĞ¾Ğ³Ğ´Ğ° Ğ½Ğµ Ğ¿ĞµÑ€ĞµÑÑ‡Ğ¸Ñ‚Ñ‹Ğ²Ğ°ĞµÑ‚ÑÑ
  comment: {
    value: "",
    label: (t) => t("form.comment"),
    dependencies: [], // â† Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ñ€Ğ¸ init/reset
  },

  // Ğ¡Ğ»Ğ¾Ğ¶Ğ½Ğ°Ñ Ğ·Ğ°Ğ²Ğ¸ÑĞ¸Ğ¼Ğ¾ÑÑ‚ÑŒ
  shippingCost: {
    value: 0,
    isVisible: (v) => v.country !== "" && v.city !== "",
    dependencies: ["country", "city"],
  },
};
```

---

## API Reference

### useFormStore

```typescript
function useFormStore<TValues>(
  id: string,
  options: {
    config: FormConfig<TValues>;
    defaults: TValues;
    initial?: Partial<TValues>;
    locale?: string;
    persistId?: string;
    onChange?: (params) => void | Partial<TValues>;
    beforeSubmit?: (values) => TValues;
    onSubmit?: (values) => Promise<any>;
    afterSubmit?: (data, reset) => void;
    autoUnregister?: boolean;
  }
): FormStoreApi<TValues>;
```

**Ğ’Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚:**

| Ğ¡Ğ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ¾ | Ğ¢Ğ¸Ğ¿ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|-----|----------|
| `values` | `TValues` | Ğ¢ĞµĞºÑƒÑ‰Ğ¸Ğµ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ñ Ğ¿Ğ¾Ğ»ĞµĞ¹ |
| `fields` | `FieldStates<TValues>` | Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ ĞºĞ°Ğ¶Ğ´Ğ¾Ğ³Ğ¾ Ğ¿Ğ¾Ğ»Ñ |
| `errors` | `Record<string, string>` | ĞÑˆĞ¸Ğ±ĞºĞ¸ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ğ¸ |
| `dirty` | `boolean` | Ğ¤Ğ¾Ñ€Ğ¼Ğ° Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ° |
| `submitting` | `boolean` | Ğ˜Ğ´Ñ‘Ñ‚ Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²ĞºĞ° |
| `setValue(key, value)` | `function` | Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ |
| `reset(values?)` | `function` | Ğ¡Ğ±Ñ€Ğ¾ÑĞ¸Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼Ñƒ |
| `setLocale(locale)` | `function` | Ğ¡Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ»Ğ¾ĞºĞ°Ğ»ÑŒ |
| `submit()` | `function` | ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ñ„Ğ¾Ñ€Ğ¼Ñƒ |
| `validateForm()` | `function` | Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ¸Ñ€Ğ¾Ğ²Ğ°Ñ‚ÑŒ Ğ²ÑÑ Ñ„Ğ¾Ñ€Ğ¼Ñƒ |
| `getFieldProps(key)` | `function` | ĞŸĞ¾Ğ»ÑƒÑ‡Ğ¸Ñ‚ÑŒ Ğ¿Ñ€Ğ¾Ğ¿ÑÑ‹ Ğ´Ğ»Ñ UI ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ° |
| `getVisibleFields()` | `function` | Ğ¡Ğ¿Ğ¸ÑĞ¾Ğº Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹ |

### Ğ¥ÑƒĞºĞ¸ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ´ĞµĞ»ÑŒĞ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ĞµĞ¹

```typescript
// ĞŸĞ¾Ğ»Ğ½Ğ¾Ğµ ÑĞ¾ÑÑ‚Ğ¾ÑĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»Ñ (Ğ²ÑĞµ ÑĞ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ°)
const field = useFieldState<string>("form-id", "fieldName");
// â†’ { value, isVisible, isDisabled, isRequired, label, error, ... }

// Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
const value = useFieldValue<string>("form-id", "fieldName");

// Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ²Ğ¸Ğ´Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ
const isVisible = useFieldVisible("form-id", "fieldName");

// Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾ÑˆĞ¸Ğ±ĞºĞ°
const error = useFieldError("form-id", "fieldName");

// Ğ¢Ğ¾Ğ»ÑŒĞºĞ¾ setter (Ğ±ĞµĞ· Ğ¿Ğ¾Ğ´Ğ¿Ğ¸ÑĞºĞ¸)
const setValue = useSetFieldValue<string>("form-id", "fieldName");
```

---

## FieldConfig

```typescript
interface FieldConfig<TValue, TValues> {
  // Ğ—Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ
  value?: TValue | ((values: TValues) => TValue);

  // Ğ¡Ñ‚Ñ€Ğ¾ĞºĞ¾Ğ²Ñ‹Ğµ ÑĞ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° (Ğ¿Ğ¾Ğ´Ğ´ĞµÑ€Ğ¶Ğ¸Ğ²Ğ°ÑÑ‚ i18n)
  label?: string | ((translate, settings?) => string);
  placeholder?: string | ((translate, settings?) => string);
  description?: string | ((translate, settings?) => string);

  // Boolean ÑĞ²Ğ¾Ğ¹ÑÑ‚Ğ²Ğ° (Ğ¼Ğ¾Ğ³ÑƒÑ‚ Ğ±Ñ‹Ñ‚ÑŒ Ñ„ÑƒĞ½ĞºÑ†Ğ¸ÑĞ¼Ğ¸)
  isVisible?: boolean | ((values: TValues) => boolean);
  isDisabled?: boolean | ((values: TValues) => boolean);
  isReadOnly?: boolean | ((values: TValues) => boolean);
  isRequired?: boolean | string | ((values: TValues) => boolean | string);

  // Ğ’Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ
  validate?: (value: TValue, values: TValues) => string | undefined;

  // Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ
  formatter?: (value: TValue, values: TValues) => TValue;

  // Ğ¡Ğ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ
  setter?: (value, values, setValues) => void;

  // ĞĞ¿Ñ‚Ğ¸Ğ¼Ğ¸Ğ·Ğ°Ñ†Ğ¸Ñ
  dependencies?: Array<keyof TValues>;
}
```

---

## Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ HeroUI

`getFieldProps()` Ğ²Ğ¾Ğ·Ğ²Ñ€Ğ°Ñ‰Ğ°ĞµÑ‚ Ğ¾Ğ±ÑŠĞµĞºÑ‚, ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ñ‹Ğ¹ Ñ ĞºĞ¾Ğ¼Ğ¿Ğ¾Ğ½ĞµĞ½Ñ‚Ğ°Ğ¼Ğ¸ HeroUI:

```tsx
const props = form.getFieldProps("email");
// {
//   value: "test@example.com",
//   onValueChange: (v) => setValue("email", v),
//   isDisabled: false,
//   isReadOnly: false,
//   isRequired: true,
//   isInvalid: false,
//   errorMessage: undefined,
//   label: "Email",
//   placeholder: "Enter email",
//   description: "We'll never share your email",
// }

<Input {...props} />
```

---

## Ğ¡Ñ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğ° Ğ¼Ğ¾Ğ´ÑƒĞ»Ñ

```
palistor/
â”œâ”€â”€ core/
â”‚   â”œâ”€â”€ types.ts          # Ğ¢Ğ¸Ğ¿Ñ‹
â”‚   â”œâ”€â”€ createStore.ts    # Ğ‘Ğ°Ğ·Ğ¾Ğ²Ñ‹Ğ¹ store
â”‚   â”œâ”€â”€ computeFields.ts  # Ğ’Ñ‹Ñ‡Ğ¸ÑĞ»ĞµĞ½Ğ¸Ğµ fieldStates
â”‚   â”œâ”€â”€ actions.ts        # Ğ§Ğ¸ÑÑ‚Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸
â”‚   â””â”€â”€ registry.ts       # Ğ“Ğ»Ğ¾Ğ±Ğ°Ğ»ÑŒĞ½Ñ‹Ğ¹ Ñ€ĞµĞµÑÑ‚Ñ€
â”œâ”€â”€ react/
â”‚   â”œâ”€â”€ useFormStore.ts   # Ğ“Ğ»Ğ°Ğ²Ğ½Ñ‹Ğ¹ Ñ…ÑƒĞº
â”‚   â”œâ”€â”€ useField.ts       # Ğ¥ÑƒĞºĞ¸ Ğ´Ğ»Ñ Ğ¿Ğ¾Ğ»ĞµĞ¹
â”‚   â””â”€â”€ useSelector.ts    # Ğ£Ğ½Ğ¸Ğ²ĞµÑ€ÑĞ°Ğ»ÑŒĞ½Ñ‹Ğ¹ ÑĞµĞ»ĞµĞºÑ‚Ğ¾Ñ€
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ materialize.ts    # mergeState, difference
â”‚   â”œâ”€â”€ helpers.ts        # Ğ Ğ°Ğ±Ğ¾Ñ‚Ğ° Ñ Ğ¿ÑƒÑ‚ÑĞ¼Ğ¸
â”‚   â””â”€â”€ persistence.ts    # localStorage
â””â”€â”€ index.ts              # ĞŸÑƒĞ±Ğ»Ğ¸Ñ‡Ğ½Ñ‹Ğ¹ API
```

---

## ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹

### Ğ¡Ğ²ÑĞ·Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ (setter)

```typescript
const config: FormConfig<PriceForm> = {
  price: { value: 0 },
  quantity: { value: 1 },
  total: {
    // Computed value
    value: (v) => v.price * v.quantity,
    isReadOnly: true,
    dependencies: ["price", "quantity"],
  },
};
```

### Ğ£ÑĞ»Ğ¾Ğ²Ğ½Ğ°Ñ Ğ²Ğ°Ğ»Ğ¸Ğ´Ğ°Ñ†Ğ¸Ñ

```typescript
const config: FormConfig<UserForm> = {
  accountType: { value: "personal" },
  companyName: {
    value: "",
    isVisible: (v) => v.accountType === "business",
    isRequired: (v) => v.accountType === "business"
      ? "validation.companyRequired"
      : false,
    dependencies: ["accountType"],
  },
};
```

### Persistence (Ñ‡ĞµÑ€Ğ½Ğ¾Ğ²Ğ¸ĞºĞ¸)

```typescript
const form = useFormStore("long-form", {
  config,
  defaults,
  persistId: "draft-long-form", // â† ÑĞ¾Ñ…Ñ€Ğ°Ğ½ÑĞµÑ‚ Ğ² localStorage
});

// ĞŸÑ€Ğ¸ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞµ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ñ‹ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğµ Ğ²Ğ¾ÑÑÑ‚Ğ°Ğ½Ğ¾Ğ²ÑÑ‚ÑÑ
```

---

## Ğ›Ğ¸Ñ†ĞµĞ½Ğ·Ğ¸Ñ

MIT